{"version":3,"sources":["assets/scripts/main.js"],"names":["Color","r","g","b","set","Math","round","clamp","angle","PI","sin","cos","multiply","value","matrix","newR","newG","newB","linear","slope","intercept","max","min","h","s","l","d","Solver","target","baseColor","targetHSL","hsl","reusedColor","result","solveNarrow","solveWide","values","loss","filter","css","A","c","a","best","Infinity","i","initial","spsa","wide","A1","iters","alpha","gamma","bestLoss","deltas","Array","highArgs","lowArgs","k","ck","pow","random","lossDiff","ak","fix","slice","idx","filters","color","invert","sepia","saturate","hueRotate","brightness","contrast","colorHSL","abs","fmt","multiplier","hexToRgb","hex","shorthandRegex","replace","m","exec","parseInt","$","document","ready","click","rgb","val","length","alert","solver","solve","lossMsg","toString","attr","text","html","toFixed"],"mappings":"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","file":"main.df924a13.js","sourceRoot":"../src","sourcesContent":["/**\n * @author   Barrett Sonntag\n * @source  https://codepen.io/sosuke/pen/Pjoqqp\n */\n'use strict';\n\nclass Color {\n  constructor(r, g, b) {\n    this.set(r, g, b);\n  }\n\n  toString() {\n    return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`;\n  }\n\n  set(r, g, b) {\n    this.r = this.clamp(r);\n    this.g = this.clamp(g);\n    this.b = this.clamp(b);\n  }\n\n  hueRotate(angle = 0) {\n    angle = angle / 180 * Math.PI;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    this.multiply([\n      0.213 + cos * 0.787 - sin * 0.213,\n      0.715 - cos * 0.715 - sin * 0.715,\n      0.072 - cos * 0.072 + sin * 0.928,\n      0.213 - cos * 0.213 + sin * 0.143,\n      0.715 + cos * 0.285 + sin * 0.140,\n      0.072 - cos * 0.072 - sin * 0.283,\n      0.213 - cos * 0.213 - sin * 0.787,\n      0.715 - cos * 0.715 + sin * 0.715,\n      0.072 + cos * 0.928 + sin * 0.072,\n    ]);\n  }\n\n  grayscale(value = 1) {\n    this.multiply([\n      0.2126 + 0.7874 * (1 - value),\n      0.7152 - 0.7152 * (1 - value),\n      0.0722 - 0.0722 * (1 - value),\n      0.2126 - 0.2126 * (1 - value),\n      0.7152 + 0.2848 * (1 - value),\n      0.0722 - 0.0722 * (1 - value),\n      0.2126 - 0.2126 * (1 - value),\n      0.7152 - 0.7152 * (1 - value),\n      0.0722 + 0.9278 * (1 - value),\n    ]);\n  }\n\n  sepia(value = 1) {\n    this.multiply([\n      0.393 + 0.607 * (1 - value),\n      0.769 - 0.769 * (1 - value),\n      0.189 - 0.189 * (1 - value),\n      0.349 - 0.349 * (1 - value),\n      0.686 + 0.314 * (1 - value),\n      0.168 - 0.168 * (1 - value),\n      0.272 - 0.272 * (1 - value),\n      0.534 - 0.534 * (1 - value),\n      0.131 + 0.869 * (1 - value),\n    ]);\n  }\n\n  saturate(value = 1) {\n    this.multiply([\n      0.213 + 0.787 * value,\n      0.715 - 0.715 * value,\n      0.072 - 0.072 * value,\n      0.213 - 0.213 * value,\n      0.715 + 0.285 * value,\n      0.072 - 0.072 * value,\n      0.213 - 0.213 * value,\n      0.715 - 0.715 * value,\n      0.072 + 0.928 * value,\n    ]);\n  }\n\n  multiply(matrix) {\n    const newR = this.clamp(this.r * matrix[0] + this.g * matrix[1] + this.b * matrix[2]);\n    const newG = this.clamp(this.r * matrix[3] + this.g * matrix[4] + this.b * matrix[5]);\n    const newB = this.clamp(this.r * matrix[6] + this.g * matrix[7] + this.b * matrix[8]);\n    this.r = newR;\n    this.g = newG;\n    this.b = newB;\n  }\n\n  brightness(value = 1) {\n    this.linear(value);\n  }\n  contrast(value = 1) {\n    this.linear(value, -(0.5 * value) + 0.5);\n  }\n\n  linear(slope = 1, intercept = 0) {\n    this.r = this.clamp(this.r * slope + intercept * 255);\n    this.g = this.clamp(this.g * slope + intercept * 255);\n    this.b = this.clamp(this.b * slope + intercept * 255);\n  }\n\n  invert(value = 1) {\n    this.r = this.clamp((value + this.r / 255 * (1 - 2 * value)) * 255);\n    this.g = this.clamp((value + this.g / 255 * (1 - 2 * value)) * 255);\n    this.b = this.clamp((value + this.b / 255 * (1 - 2 * value)) * 255);\n  }\n\n  hsl() {\n    // Code taken from https://stackoverflow.com/a/9493060/2688027, licensed under CC BY-SA.\n    const r = this.r / 255;\n    const g = this.g / 255;\n    const b = this.b / 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h, s, l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return {\n      h: h * 100,\n      s: s * 100,\n      l: l * 100,\n    };\n  }\n\n  clamp(value) {\n    if (value > 255) {\n      value = 255;\n    } else if (value < 0) {\n      value = 0;\n    }\n    return value;\n  }\n}\n\nclass Solver {\n  constructor(target, baseColor) {\n    this.target = target;\n    this.targetHSL = target.hsl();\n    this.reusedColor = new Color(0, 0, 0);\n  }\n\n  solve() {\n    const result = this.solveNarrow(this.solveWide());\n    return {\n      values: result.values,\n      loss: result.loss,\n      filter: this.css(result.values),\n    };\n  }\n\n  solveWide() {\n    const A = 5;\n    const c = 15;\n    const a = [60, 180, 18000, 600, 1.2, 1.2];\n\n    let best = { loss: Infinity };\n    for (let i = 0; best.loss > 25 && i < 3; i++) {\n      const initial = [50, 20, 3750, 50, 100, 100];\n      const result = this.spsa(A, a, c, initial, 1000);\n      if (result.loss < best.loss) {\n        best = result;\n      }\n    }\n    return best;\n  }\n\n  solveNarrow(wide) {\n    const A = wide.loss;\n    const c = 2;\n    const A1 = A + 1;\n    const a = [0.25 * A1, 0.25 * A1, A1, 0.25 * A1, 0.2 * A1, 0.2 * A1];\n    return this.spsa(A, a, c, wide.values, 500);\n  }\n\n  spsa(A, a, c, values, iters) {\n    const alpha = 1;\n    const gamma = 0.16666666666666666;\n\n    let best = null;\n    let bestLoss = Infinity;\n    const deltas = new Array(6);\n    const highArgs = new Array(6);\n    const lowArgs = new Array(6);\n\n    for (let k = 0; k < iters; k++) {\n      const ck = c / Math.pow(k + 1, gamma);\n      for (let i = 0; i < 6; i++) {\n        deltas[i] = Math.random() > 0.5 ? 1 : -1;\n        highArgs[i] = values[i] + ck * deltas[i];\n        lowArgs[i] = values[i] - ck * deltas[i];\n      }\n\n      const lossDiff = this.loss(highArgs) - this.loss(lowArgs);\n      for (let i = 0; i < 6; i++) {\n        const g = lossDiff / (2 * ck) * deltas[i];\n        const ak = a[i] / Math.pow(A + k + 1, alpha);\n        values[i] = fix(values[i] - ak * g, i);\n      }\n\n      const loss = this.loss(values);\n      if (loss < bestLoss) {\n        best = values.slice(0);\n        bestLoss = loss;\n      }\n    }\n    return { values: best, loss: bestLoss };\n\n    function fix(value, idx) {\n      let max = 100;\n      if (idx === 2 /* saturate */) {\n        max = 7500;\n      } else if (idx === 4 /* brightness */ || idx === 5 /* contrast */) {\n        max = 200;\n      }\n\n      if (idx === 3 /* hue-rotate */) {\n        if (value > max) {\n          value %= max;\n        } else if (value < 0) {\n          value = max + value % max;\n        }\n      } else if (value < 0) {\n        value = 0;\n      } else if (value > max) {\n        value = max;\n      }\n      return value;\n    }\n  }\n\n  loss(filters) {\n    // Argument is array of percentages.\n    const color = this.reusedColor;\n    color.set(0, 0, 0);\n\n    color.invert(filters[0] / 100);\n    color.sepia(filters[1] / 100);\n    color.saturate(filters[2] / 100);\n    color.hueRotate(filters[3] * 3.6);\n    color.brightness(filters[4] / 100);\n    color.contrast(filters[5] / 100);\n\n    const colorHSL = color.hsl();\n    return (\n      Math.abs(color.r - this.target.r) +\n      Math.abs(color.g - this.target.g) +\n      Math.abs(color.b - this.target.b) +\n      Math.abs(colorHSL.h - this.targetHSL.h) +\n      Math.abs(colorHSL.s - this.targetHSL.s) +\n      Math.abs(colorHSL.l - this.targetHSL.l)\n    );\n  }\n\n  css(filters) {\n    function fmt(idx, multiplier = 1) {\n      return Math.round(filters[idx] * multiplier);\n    }\n    return `filter: invert(${fmt(0)}%) sepia(${fmt(1)}%) saturate(${fmt(2)}%) hue-rotate(${fmt(3, 3.6)}deg) brightness(${fmt(4)}%) contrast(${fmt(5)}%);`;\n  }\n}\n\nfunction hexToRgb(hex) {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n    return r + r + g + g + b + b;\n  });\n\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? [\n      parseInt(result[1], 16),\n      parseInt(result[2], 16),\n      parseInt(result[3], 16),\n    ]\n    : null;\n}\n\n$(document).ready(() => {\n  $('button.execute').click(() => {\n    const rgb = hexToRgb($('input.target').val());\n    if (rgb.length !== 3) {\n      alert('Invalid format!');\n      return;\n    }\n\n    const color = new Color(rgb[0], rgb[1], rgb[2]);\n    const solver = new Solver(color);\n    const result = solver.solve();\n\n    let lossMsg;\n    if (result.loss < 1) {\n      lossMsg = 'This is a perfect result.';\n    } else if (result.loss < 5) {\n      lossMsg = 'The is close enough.';\n    } else if (result.loss < 15) {\n      lossMsg = 'The color is somewhat off. Consider running it again.';\n    } else {\n      lossMsg = 'The color is extremely off. Run it again!';\n    }\n\n    $('.realPixel').css('background-color', color.toString());\n    $('.filterPixel').attr('style', result.filter);\n    $('.filterDetail').text(result.filter);\n    $('.lossDetail').html(`Loss: ${result.loss.toFixed(1)}. <b>${lossMsg}</b>`);\n  });\n});\n"]}